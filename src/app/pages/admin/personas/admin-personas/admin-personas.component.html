<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
/>
<ul role="list" class="divide-y divide-gray-100 p-3">
  @for (persona of personas$ |async; track persona.id) {

  <li class="flex justify-between gap-x-6 py-5">
    <div class="flex min-w-0 gap-x-4">
      <span class="material-symbols-outlined pt-5"> person </span>
      <div class="min-w-0 flex-auto">
        <p class="text-sm font-semibold leading-6 text-gray-900">
          {{ persona.nombre }} {{ persona.apellido }}
        </p>
        <p class="mt-1 truncate text-xs leading-5 text-gray-500">
          {{ persona.mail }}
        </p>
        <p class="mt-1 truncate text-xs leading-5 text-gray-500">
          Productos publicados: {{ persona.prods_publicados.length }}
        </p>
      </div>
    </div>
    <div class="hidden shrink-0 sm:flex sm:flex-row sm:items-center gap-5">
      <div>
        <p class="text-sm leading-6 text-gray-900">(persona.rol)</p>
        <p class="mt-1 text-xs leading-5 text-gray-500">
          {{ persona.telefono }}
        </p>
      </div>
      <div class="flex gap-2">
        <button>
          <span
            class="material-symbols-outlined rounded-md text-gray-200 bg-green-700 p-1"
          >
            edit
          </span>
        </button>
        <button (click)="OpenDialog(persona)">
          <span
            class="material-symbols-outlined rounded-md text-gray-200 bg-red-800 p-1"
          >
            delete
          </span>
        </button>
      </div>
    </div>
  </li>

  }@empty {
  <p class="p-2 text-center align-middle">
    No hay personas cargadas en el sistema
  </p>
  }
</ul>

<dui-dialog
  [open]="openDialog"
  [closeOnBackground]="true"
  (onClose)="this.openDialog = !this.openDialog"
>
  <dui-dialog-header>
    Está a punto de borrar a una persona de la base de datos
  </dui-dialog-header>
  <dui-dialog-body>
    ¿Está seguro que desea borrar a {{ personaToDelete?.nombre }}
    {{ personaToDelete?.apellido }}?
  </dui-dialog-body>
  <dui-dialog-footer>
    <dui-button
      class="mr-2"
      size="md"
      variant="text"
      color="red"
      [rounded]="false"
      >CANCEL</dui-button
    >
    <dui-button size="md" color="green" (click)="delete(personaToDelete!)"
      >CONFIRM</dui-button
    >
  </dui-dialog-footer>
</dui-dialog>
